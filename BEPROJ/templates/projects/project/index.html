{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Collapsible sidebar using Bootstrap 4</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!--MDbootstrap CSS CDN-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.8/css/mdb.min.css" rel="stylesheet">

    <!-- FontAwesome CSS CDN -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">

    <!--Custom CSS -->
    <link rel="stylesheet" href="{%static 'css/cssstyle.css' %}">
    <style>
    .loader{
    position: fixed;
left: 50%;
top: 50%;
z-index: 9999;
}
    </style>

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>

</head>

<body>
        <div id="overlay">
                <img class="loader" src="{% static 'img/sliding_square_loader_view.gif' %}" alt="Loading" />
                Loading...
           </div>
    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3>Research-Era</h3>
                <strong>RE</strong>
            </div>

            <ul class="list-unstyled components">
                <li class="active">
                    <a href="../../">
                        <i class="fas fa-home"></i>
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-briefcase"></i>
                        Profile
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-image"></i>
                        Portfolio
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-question"></i>
                        FAQ
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fas fa-paper-plane"></i>
                        Contact
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Page Content  -->

        <div id="content">

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i>
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>
                    <button class="btn btn-dark back" ><i class="fas fa-arrow-left"></i>&nbsp;&nbsp; Projects</button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item active">
                                <a class="nav-link" href="logout/">Logout</a>
                            </li>
                        </ul><!-- This code is to make the front end of the website that will be called research-era and will provide sofisticated UI and easy onclick operations to the researchers worldwide. The login-->
                    </div>
                </div>
            </nav>
            <div class="toast" style="position: absolute; bottom: 0; right: 0;">
                    <div class="toast-header">
                      <img src="{% static 'img/RE.png' %}" class="rounded mr-2" alt="...">
                      <strong class="mr-auto">Research-Era</strong>
                      <small>Just now</small>
                      <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="toast-body">
                      The new file has been added successfully!
                    </div>
                  </div>
            <!-- {% if uploaded %}
                <script>
                        $(document).ready(function () {
                        $('.toast').toast('show');
                        $('.toast').css("z-index","1");
                        });
                </script>
            {% endif %} -->
            {% for proj in project%}
            <div class="jumbotron jumbotron-fluid">
                <div class="container">
                <div class="row">
                    <div class="col-6">
                  <h1 class="display-5">{{proj.name}}</h1>
                  </div>
                  <div class="col-6">
                  <button class="btn peach-gradient relevant " style="position:absolute;right:0">See Relevant Papers</button>
                </div>
                  </div>
                  <div class="row">
                      <div class = "col-sm-8" style="word-wrap: break-word;">
                        <h4>{{proj.ini_pitch}}</h4>
                      </div>
                      <div class = "col-sm-4">
                  <button class="btn blue-gradient mlzone " style="position:absolute;right:0">ML Zone</button>
                </div>
                </div>
                <br>
                <div class="row">
                      <div class = "col-6" style="word-wrap: break-word;">
                      </div>
                      <div class = "col-sm-6">
                  <button class="btn purple-gradient summ " style="position:absolute;right:0">Summarization</button>
                </div>
                </div>
                <br>   
        <h5> Progress</h5>
        <div class="progress md-progress" style="height: 20px">
    <div class="progress-bar" role="progressbar" style="width: 25%; height: 20px" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
</div>
</div>
</div>
<form  method="POST" enctype="multipart/form-data">
    {% csrf_token %}
<div class="form-group">
Upload a file: <input type="file" name="document" id= "upload" name="file" required> </div>
<div class="form-group"><input class="form-control" type="text" name="remarks" placeholder="Remarks"></div>
<div class="form-group"><input type="hidden" value="upload" name="upload"   ></div>
<div class="form-group"><input type="hidden" value="{{proj.id}}" name="proj_id" id="proj_id"></div>
<div class="form-group"><button type="button" onclick="submitForm()" class="btn btn-warning uploadbtn">Upload</button></div>
</form>
<div class="card files">
  <div class="card-body">
        <h4> Files</h4>
        <table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Sr. No</th>
      <th scope="col">File name</th>
      <th scope="col">Date</th>
      <th scope="col">Specifications</th>
      <th scope="col">Remarks</th>
    </tr>
  </thead>
  <tbody>
      {% for file in files %}
    <tr>
      <th scope="row">
          <a href="{{file.link.url}}" class="btn btn-primary btn-sm" target="_blank">Download .{{file.specifications}}</a>
      </th>
      <td>{{file.name}}</td>
      <td>{{file.date}}</td>
      <td>{{file.specifications}}</td>
      <td>{{file.remarks}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
  </div>
</div>
{% endfor %}
              
    </div>
            </div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!--MDbootstrap JS-->
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.8/js/mdb.min.js"></script>


    <script type="text/javascript">
        localStorage.setItem("proj_id",$("#proj_id").val());
        var url = ""
        $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
        $(".uploadbtn").attr('disabled',true);
        $('.files').css({"overflow": "scroll"});
        $('#upload').on('change', function(){
            if($('#upload').val()){
            $(".uploadbtn").attr('disabled',false);
            }
        });
        $('.uploadbtn').on('click',function(e){
            e.preventDefault();
            var frm = document.getElementsByTagName('form')[0];
            frm.submit(); // Submit the form
            frm.reset();  // Reset all form data
            return false; // Prevent page refresh
        });
        
        $('.toast').attr("data-delay",5000);
        if("{{uploaded}}" == '1'){
            $('.toast').toast('show');
            $('.toast').css("z-index","1");
        }
        $('.back').on('click',function(){
            window.location.href = "/home/projects";
        });
        $('.relevant').on('click',function(){
            window.location.href = "/home/projects/project/relevant"
            $('#overlay').show();
        });
        $('.mlzone').on('click',function(){
            window.location.href = "/mlzone"
        });
        $('.summ').on('click',function(){
            window.location.href = "/mlzone/summarization"
        });
        $(function(){
            // PAGE IS FULLY LOADED  
            // FADE OUT YOUR OVERLAYING DIV
            $('#overlay').fadeOut();
         });
    });
    </script>
</body>

</html>
